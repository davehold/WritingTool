function starteDieMaschine(){timer=60*parseInt(document.getElementById("timerInput").value,10),textarea.setAttribute("contenteditable",!0),textarea.innerText="",textarea.focus(),toggleOptions()}function resetEverything(){backspaceBlockActive=wordLimitActive=blurMode=outOfTime=timerMode=!(timer=30),currentWordOnlyActive=inputLock=!(wordLimit=10)}function toggleOptions(){"none"==options.style.display?options.style.display="block":options.style.display="none"}function handleKeydown(e){if(backspaceBlockActive&&8===(e=e||window.event).keyCode)return"function"==typeof e.preventDefault&&e.preventDefault(),!1}function updateText(e){var t=textarea.innerText;document.getElementById("typedtext").innerText=t,document.getElementById("wordcount").innerText=countWords(),wordLimitActive&&countWords()>=wordLimit&&toggleInputLock(!1)}function toggleInputLock(e){e?(timerMode=!1,textarea.setAttribute("contenteditable",!0)):textarea.removeAttribute("contenteditable")}function startTimer(){outOfTime||(new Date,minutes=parseInt(timer/60,10),seconds=parseInt(timer%60,10),minutes=minutes<10?"0"+minutes:minutes,seconds=seconds<10?"0"+seconds:seconds,timer--<=0&&(toggleInputLock(!(seconds=minutes="00")),toggleBlur(),toggleOptions(),console.log("timer ran out of tape"),outOfTime=!0)),document.getElementById("timer").innerText=minutes+":"+seconds}function toggleBlur(){blurMode?(blurMode=!1,textarea.setAttribute("class","")):(blurMode=!0,textarea.setAttribute("class","active"))}function toggleTimer(){timerMode?(timerMode=!1,clearInterval(timerUpdateInterval)):(timerMode=!0,timerUpdateInterval=setInterval(startTimer,1e3))}function getCurrentWord(){return textarea.innerText.split(" ").pop()}function countWords(){return textarea.innerText.split(" ").length}function toggleWordLimit(){wordLimitActive=!wordLimitActive}function toggleBackspaceBlock(){backspaceBlockActive=!backspaceBlockActive}var timerUpdateInterval,duration,minutes,seconds,textarea=document.getElementById("textarea"),options=document.getElementById("options"),timer=30,timerMode=!1,outOfTime=!1,blurMode=!1,wordLimitActive=!1,backspaceBlockActive=!1,wordLimit=10,inputLock=!1,currentWordOnlyActive=!1;textarea.setAttribute("contenteditable",!1),textarea.addEventListener("input",updateText),textarea.addEventListener("keydown",handleKeydown);